# DevOps-Kubernetes
All about K8s. Documentation, files, instructions &amp; etc....

K8s (Kubernetes) ‚Äî —ç—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ (—á–∞—â–µ –≤—Å–µ–≥–æ Docker) –≤ –±–æ–ª—å—à–∏—Ö –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö.

–ü—Ä–æ—â–µ –≥–æ–≤–æ—Ä—è: Kubernetes –ø–æ–º–æ–≥–∞–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å, –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –æ–±–ª–∞–∫–µ –∏–ª–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–∞—Ö.

–ó–∞—á–µ–º –Ω—É–∂–µ–Ω Kubernetes

–ö–æ–≥–¥–∞ –º–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤, –≤—Ä—É—á–Ω—É—é —É–ø—Ä–∞–≤–ª—è—Ç—å –∏–º–∏ —Å–ª–æ–∂–Ω–æ. K8s —É–º–µ–µ—Ç:

‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å –∏—Ö –ø—Ä–∏ —Å–±–æ–µ
‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É
‚úÖ –†–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å —Ç—Ä–∞—Ñ–∏–∫
‚úÖ –û–±–Ω–æ–≤–ª—è—Ç—å –±–µ–∑ –ø—Ä–æ—Å—Ç–æ—è
‚úÖ –≠–∫–æ–Ω–æ–º–∏—Ç—å —Ä–µ—Å—É—Ä—Å—ã

üîπ –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–Ω—è—Ç–∏—è
üì¶ Pod
–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –µ–¥–∏–Ω–∏—Ü–∞ ‚Äî –æ–¥–∏–Ω –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤.

üñ• Node
–°–µ—Ä–≤–µ—Ä –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ.

üåê Cluster
–ì—Ä—É–ø–ø–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤ (Nodes).

‚öô Deployment
–£–ø—Ä–∞–≤–ª—è–µ—Ç –≤–µ—Ä—Å–∏—è–º–∏ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º Pod‚Äô–æ–≤.

üîå Service
–î–∞—ë—Ç –¥–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –ø–æ —Å–µ—Ç–∏.

üìà Autoscaling
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ/—É–º–µ–Ω—å—à–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏.

---

üß© 1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–ª–∞—Å—Ç–µ—Ä–∞

–ö–ª–∞—Å—Ç–µ—Ä Kubernetes —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö —á–∞—Å—Ç–µ–π:

‚úÖ Control Plane (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)

üëâ ¬´–ú–æ–∑–≥¬ª –∫–ª–∞—Å—Ç–µ—Ä–∞ ‚Äî —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Å–µ–º

‚úÖ Worker Nodes (—Ä–∞–±–æ—á–∏–µ –Ω–æ–¥—ã)

üëâ ¬´–†–∞–±–æ—á–∏–µ —Ä—É–∫–∏¬ª ‚Äî –∑–∞–ø—É—Å–∫–∞—é—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

üß† 2. Control Plane ‚Äî –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

–û–±—ã—á–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ master-–Ω–æ–¥–∞—Ö.

üîπ 2.1 API Server (kube-apiserver)

üìå –ì–ª–∞–≤–Ω—ã–π –≤—Ö–æ–¥ –≤ –∫–ª–∞—Å—Ç–µ—Ä.

–í—Å–µ –∫–æ–º–∞–Ω–¥—ã –∏–¥—É—Ç —á–µ—Ä–µ–∑ –Ω–µ–≥–æ:

kubectl ‚Üí API Server ‚Üí cluster


–û–Ω:

–ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∫–æ–º–∞–Ω–¥—ã

–ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∞–≤–∞ (RBAC)

–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ

–ø–∏—à–µ—Ç –≤ etcd

–ë–µ–∑ –Ω–µ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.

üîπ 2.2 etcd (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö)

üìå –•—Ä–∞–Ω–∏—Ç –≤—Å—ë —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–ª–∞—Å—Ç–µ—Ä–∞.

–ß—Ç–æ —Ö—Ä–∞–Ω–∏—Ç:

Pods
Nodes
Secrets
ConfigMaps
Users
Policies

–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å:
—Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π
–æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤—ã–π
—Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ Raft

‚ö†Ô∏è –ü–æ—Ç–µ—Ä—è etcd = –ø–æ—Ç–µ—Ä—è –∫–ª–∞—Å—Ç–µ—Ä–∞.

üîπ 2.3 Scheduler (kube-scheduler)

üìå –í—ã–±–∏—Ä–∞–µ—Ç, –Ω–∞ –∫–∞–∫–æ–π Node –∑–∞–ø—É—Å–∫–∞—Ç—å Pod.

–£—á–∏—Ç—ã–≤–∞–µ—Ç:
CPU / RAM
–º–µ—Ç–∫–∏ (labels)
taints / tolerations
affinity

–ü—Ä–∏–º–µ—Ä:

¬´–≠—Ç–æ—Ç Pod –ª—É—á—à–µ –ø–æ–π–¥—ë—Ç –Ω–∞ Node2¬ª.

üîπ 2.4 Controller Manager (kube-controller-manager)

üìå –°–ª–µ–¥–∏—Ç –∑–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º.

–ó–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã:

–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä	–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
Deployment	–ö–æ–ª-–≤–æ Pod
Node	–ü—Ä–æ–≤–µ—Ä–∫–∞ Node
ReplicaSet	–†–µ–ø–ª–∏–∫–∏
Job	–ó–∞–¥–∞–Ω–∏—è
Namespace	–ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞

–û–Ω –ø–æ—Å—Ç–æ—è–Ω–Ω–æ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç:

¬´–ö–∞–∫ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å¬ª vs ¬´–ö–∞–∫ –µ—Å—Ç—å¬ª

–ò –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç.

üîπ 2.5 Cloud Controller (–≤ –æ–±–ª–∞–∫–µ)

üìå –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –æ–±–ª–∞–∫–æ–º.

–†–∞–±–æ—Ç–∞–µ—Ç —Å:

AWS
Azure
GCP

–£–ø—Ä–∞–≤–ª—è–µ—Ç:
LoadBalancer
–¥–∏—Å–∫–∞–º–∏
IP

‚öôÔ∏è 3. Worker Node ‚Äî —Ä–∞–±–æ—á–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

–ù–∞ –∫–∞–∂–¥–æ–π —Ä–∞–±–æ—á–µ–π –Ω–æ–¥–µ.

üîπ 3.1 Kubelet

üìå –ì–ª–∞–≤–Ω—ã–π –∞–≥–µ–Ω—Ç –Ω–æ–¥—ã.

–û–Ω:

–ø–æ–ª—É—á–∞–µ—Ç –∫–æ–º–∞–Ω–¥—ã –æ—Ç API Server

–∑–∞–ø—É—Å–∫–∞–µ—Ç Pod‚Äô—ã

—Å–ª–µ–¥–∏—Ç –∑–∞ –Ω–∏–º–∏

—à–ª—ë—Ç —Å—Ç–∞—Ç—É—Å

–ë–µ–∑ kubelet Pod‚Äô—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç.

üîπ 3.2 Container Runtime

üìå –ó–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã.

–ü—Ä–∏–º–µ—Ä—ã:

containerd (—á–∞—â–µ –≤—Å–µ–≥–æ)

CRI-O

(Docker ‚Äî —É—Å—Ç–∞—Ä–µ–ª)

–û–Ω —Ä–µ–∞–ª—å–Ω–æ —Å—Ç–∞—Ä—Ç—É–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.

üîπ 3.3 Kube-proxy

üìå –°–µ—Ç—å –∏ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞.

–û–Ω:

–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç iptables / ipvs

–¥–µ–ª–∞–µ—Ç Service –¥–æ—Å—Ç—É–ø–Ω—ã–º

–±–∞–ª–∞–Ω—Å–∏—Ä—É–µ—Ç —Ç—Ä–∞—Ñ–∏–∫

–ü—Ä–∏–º–µ—Ä:

Service ‚Üí Pod1 / Pod2 / Pod3

üåê 4. –°–µ—Ç—å –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ (CNI)

–î–ª—è —Å–µ—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è CNI-–ø–ª–∞–≥–∏–Ω.

–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ:

–ü–ª–∞–≥–∏–Ω	–ì–¥–µ
Calico	–ß–∞—Å—Ç–æ
Flannel	–ü—Ä–æ—Å—Ç–æ
Cilium	–°–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
Weave	–°—Ç–∞—Ä—ã–π

üìå –ß—Ç–æ –¥–µ–ª–∞–µ—Ç CNI:

–≤—ã–¥–∞—ë—Ç IP Pod‚Äô–∞–º

—Å–æ–µ–¥–∏–Ω—è–µ—Ç Pod‚Äô—ã

–¥–∞—ë—Ç —Å–≤—è–∑—å –º–µ–∂–¥—É –Ω–æ–¥–∞–º–∏

–ë–µ–∑ CNI —Å–µ—Ç—å –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.

üíæ 5. –•—Ä–∞–Ω–∏–ª–∏—â–µ (Storage)
üîπ CSI (Container Storage Interface)

–ü–æ–¥–∫–ª—é—á–∞–µ—Ç –¥–∏—Å–∫–∏.

–ü–æ–¥–¥–µ—Ä–∂–∫–∞:

AWS EBS

NFS

Ceph

Local

–û–±—ä–µ–∫—Ç—ã:

PV (Volume)

PVC (Claim)

StorageClass

üîê 6. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
üîπ RBAC

–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞.

–ö—Ç–æ ‚Üí —á—Ç–æ –º–æ–∂–µ—Ç.

üîπ Secrets

–•—Ä–∞–Ω–∏—Ç –ø–∞—Ä–æ–ª–∏ / —Ç–æ–∫–µ–Ω—ã.

üîπ NetworkPolicy

–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞.

üìä 7. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –Ω–æ –≤–∞–∂–Ω–æ)

–ß–∞—Å—Ç–æ —Å—Ç–∞–≤—è—Ç –æ—Ç–¥–µ–ª—å–Ω–æ:

–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç	–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
Prometheus	–ú–µ—Ç—Ä–∏–∫–∏
Grafana	–ì—Ä–∞—Ñ–∏–∫–∏
Loki	–õ–æ–≥–∏
EFK	–õ–æ–≥–∏
üîÑ 8. –ö–∞–∫ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–º–µ—Å—Ç–µ (–ø–æ—Ç–æ–∫)

–ü—Ä–∏–º–µ—Ä: —Å–æ–∑–¥–∞—ë–º Pod.

kubectl apply
   ‚Üì
API Server
   ‚Üì
etcd (—Å–æ—Ö—Ä–∞–Ω–∏–ª)
   ‚Üì
Scheduler (–≤—ã–±—Ä–∞–ª Node)
   ‚Üì
Kubelet (–∑–∞–ø—É—Å—Ç–∏–ª)
   ‚Üì
Runtime (—Å–æ–∑–¥–∞–ª –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä)
   ‚Üì
CNI (–¥–∞–ª IP)
   ‚Üì
kube-proxy (–Ω–∞—Å—Ç—Ä–æ–∏–ª —Å–µ—Ç—å)

üìå 9. –ò—Ç–æ–≥–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞
–ö–æ–º–ø–æ–Ω–µ–Ω—Ç	–ì–¥–µ	–ó–∞–¥–∞—á–∞
API Server	Control	–í—Ö–æ–¥
etcd	Control	–ë–∞–∑–∞
Scheduler	Control	–í—ã–±–æ—Ä Node
Controller	Control	–ö–æ–Ω—Ç—Ä–æ–ª—å
Kubelet	Worker	–ó–∞–ø—É—Å–∫
Runtime	Worker	–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
Kube-proxy	Worker	–°–µ—Ç—å
CNI	All	–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
CSI	All	–î–∏—Å–∫–∏
üß† –í –æ–¥–Ω–æ–º –∞–±–∑–∞—Ü–µ

Kubernetes ‚Äî —ç—Ç–æ —Å–∏—Å—Ç–µ–º–∞, –≥–¥–µ Control Plane –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏—è, etcd –≤—Å—ë —Ö—Ä–∞–Ω–∏—Ç, Scheduler –≤—ã–±–∏—Ä–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä, Kubelet –∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, CNI —Å–æ–µ–¥–∏–Ω—è–µ—Ç —Å–µ—Ç—å, –∞ kube-proxy –¥–∞—ë—Ç –¥–æ—Å—Ç—É–ø.


---

üß† –ß—Ç–æ —Ç–∞–∫–æ–µ kube-controller-manager

kube-controller-manager ‚Äî —ç—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å –≤ Control Plane, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–ø—É—Å–∫–∞–µ—Ç –Ω–∞–±–æ—Ä –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤.

üìå –ï–≥–æ –∑–∞–¥–∞—á–∞:

–°–ª–µ–¥–∏—Ç—å, —á—Ç–æ–±—ã –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ –±—ã–ª–æ —Ç–∞–∫, –∫–∞–∫ –æ–ø–∏—Å–∞–Ω–æ –≤ YAML.

–û–Ω –ø–æ—Å—Ç–æ—è–Ω–Ω–æ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç:

–ñ–µ–ª–∞–µ–º–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ ‚â† –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ


–ò –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–∞–∑–Ω–∏—Ü—É.

üîÑ –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤

–í—Å–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ:

1Ô∏è‚É£ –°–º–æ—Ç—Ä—è—Ç –≤ API Server
2Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä—è—é—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤
3Ô∏è‚É£ –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ç–∞–∫ ‚Üí –∏—Å–ø—Ä–∞–≤–ª—è—é—Ç
4Ô∏è‚É£ –ü–æ–≤—Ç–æ—Ä—è—é—Ç —Ü–∏–∫–ª –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ

–≠—Ç–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è:

üëâ Control Loop (—Ü–∏–∫–ª —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è)

üß© –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
üîπ 1. Node Controller

üìå –°–ª–µ–¥–∏—Ç –∑–∞ –Ω–æ–¥–∞–º–∏.

–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:

–ø—Ä–æ–≤–µ—Ä—è–µ—Ç heartbeat –æ—Ç kubelet

–ø–æ–º–µ—á–∞–µ—Ç –Ω–æ–¥—ã –∫–∞–∫ NotReady

—É–¥–∞–ª—è–µ—Ç Pod‚Äô—ã —Å —É–ø–∞–≤—à–∏—Ö –Ω–æ–¥

–ï—Å–ª–∏ Node –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç ‚Üí Pods –ø–µ—Ä–µ–Ω–æ—Å—è—Ç—Å—è.

üîπ 2. ReplicaSet Controller

üìå –°–ª–µ–¥–∏—Ç –∑–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º Pod‚Äô–æ–≤.

–ü—Ä–∏–º–µ—Ä:

replicas: 3


–ï—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç 2 ‚Üí —Å–æ–∑–¥–∞—ë—Ç –µ—â—ë 1
–ï—Å–ª–∏ 4 ‚Üí —É–¥–∞–ª—è–µ—Ç –ª–∏—à–Ω–∏–π

üîπ 3. Deployment Controller

üìå –£–ø—Ä–∞–≤–ª—è–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏.

–û–Ω:

—Å–æ–∑–¥–∞—ë—Ç ReplicaSet‚Äô—ã

–¥–µ–ª–∞–µ—Ç rolling update

rollback

–ü—Ä–∏–º–µ—Ä:

v1 ‚Üí v2 ‚Üí v3 (–±–µ–∑ –ø—Ä–æ—Å—Ç–æ—è)

üîπ 4. StatefulSet Controller

üìå –î–ª—è stateful-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π (–ë–î).

–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:

—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–º–µ–Ω–∞

—Å—Ç–∞–±–∏–ª—å–Ω—ã–µ –¥–∏—Å–∫–∏

–ø–æ—Ä—è–¥–æ–∫ –∑–∞–ø—É—Å–∫–∞

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:

MySQL

Kafka

Redis

üîπ 5. DaemonSet Controller

üìå –ó–∞–ø—É—Å–∫–∞–µ—Ç Pod –Ω–∞ –∫–∞–∂–¥–æ–π –Ω–æ–¥–µ.

–ü—Ä–∏–º–µ—Ä:

–ª–æ–≥–≥–µ—Ä

–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–∞–≥–µ–Ω—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

–ù–∞ –∫–∞–∂–¥–æ–π Node ‚Üí 1 Pod.

üîπ 6. Job Controller

üìå –î–ª—è —Ä–∞–∑–æ–≤—ã—Ö –∑–∞–¥–∞—á.

–û–Ω:

–∑–∞–ø—É—Å–∫–∞–µ—Ç Pod

–∂–¥—ë—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–∏ –æ—à–∏–±–∫–µ

–ü—Ä–∏–º–µ—Ä:

–º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î

–±—ç–∫–∞–ø—ã

üîπ 7. CronJob Controller

üìå –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á.

–†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ cron –≤ Linux.

–ü—Ä–∏–º–µ—Ä:

–ö–∞–∂–¥—É—é –Ω–æ—á—å –≤ 02:00 ‚Üí backup

üîπ 8. Service Account & Token Controller

üìå –£–ø—Ä–∞–≤–ª—è–µ—Ç –¥–æ—Å—Ç—É–ø–æ–º.

–°–æ–∑–¥–∞—ë—Ç:

ServiceAccount

—Ç–æ–∫–µ–Ω—ã

–î–ª—è Pod‚Äô–æ–≤.

üîπ 9. Namespace Controller

üìå –£–ø—Ä–∞–≤–ª—è–µ—Ç namespace.

–ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏:

—É–¥–∞–ª—è–µ—Ç –≤—Å–µ —Ä–µ—Å—É—Ä—Å—ã –≤–Ω—É—Ç—Ä–∏

üîπ 10. Endpoint Controller

üìå –°–≤—è–∑—ã–≤–∞–µ—Ç Service ‚Üî Pod.

–û–±–Ω–æ–≤–ª—è–µ—Ç —Å–ø–∏—Å–æ–∫ Pod‚Äô–æ–≤ –¥–ª—è Service.

‚öôÔ∏è –î—Ä—É–≥–∏–µ –≤–∞–∂–Ω—ã–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä	–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
HPA	Autoscaling
PV	Volumes
Garbage	–£–¥–∞–ª–µ–Ω–∏–µ –º—É—Å–æ—Ä–∞
Certificate	TLS
üß™ –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã (ReplicaSet)

–î–æ–ø—É—Å—Ç–∏–º:

replicas: 3


–§–∞–∫—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç: 2 Pod.

ReplicaSet Controller:

1Ô∏è‚É£ –í–∏–¥–∏—Ç: –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç Pod
2Ô∏è‚É£ –°–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π
3Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–Ω–æ–≤–∞

–ò —Ç–∞–∫ –≤—Å–µ–≥–¥–∞.

üìå –ì–¥–µ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã

–í—Å–µ –æ–Ω–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –≤–Ω—É—Ç—Ä–∏:

kube-controller-manager


–û–±—ã—á–Ω–æ –∫–∞–∫ Pod –≤ namespace:

kube-system

üß† –ö–æ—Ä–æ—Ç–∫–æ

kube-controller-manager ‚Äî —ç—Ç–æ ¬´–∞–≤—Ç–æ–ø–∏–ª–æ—Ç¬ª Kubernetes, –∫–æ—Ç–æ—Ä—ã–π —Å–ª–µ–¥–∏—Ç, —á—Ç–æ–±—ã –≤—Å—ë –≤—Å–µ–≥–¥–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª–æ –æ–ø–∏—Å–∞–Ω–∏—é.

---

üß† –ß—Ç–æ —Ç–∞–∫–æ–µ kube-scheduler

kube-scheduler ‚Äî —ç—Ç–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç Control Plane, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ—à–∞–µ—Ç:

üìå –Ω–∞ –∫–∞–∫–æ–π Node –∑–∞–ø—É—Å—Ç–∏—Ç—å Pod.

–û–Ω –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç Pod —Å–∞–º ‚Äî –æ–Ω —Ç–æ–ª—å–∫–æ –≤—ã–±–∏—Ä–∞–µ—Ç –Ω–æ–¥—É.

–ó–∞–ø—É—Å–∫–æ–º –∑–∞–Ω–∏–º–∞–µ—Ç—Å—è kubelet.

üîÑ –ö–æ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç scheduler

Scheduler –≤–∫–ª—é—á–∞–µ—Ç—Å—è, –∫–æ–≥–¥–∞:

‚úÖ –ü–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–æ–≤—ã–π Pod
‚úÖ –£ Pod –Ω–µ—Ç –ø–æ–ª—è nodeName

–¢–æ –µ—Å—Ç—å Pod –µ—â—ë –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω –∫ —Å–µ—Ä–≤–µ—Ä—É.

‚öôÔ∏è –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç kube-scheduler (—ç—Ç–∞–ø—ã)

–ü—Ä–æ—Ü–µ—Å—Å —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ 2 –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ–∞–∑:

1Ô∏è‚É£ Filtering (–û—Ç–±–æ—Ä)

Scheduler —É–±–∏—Ä–∞–µ—Ç –Ω–µ–ø–æ–¥—Ö–æ–¥—è—â–∏–µ –Ω–æ–¥—ã.

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç:

—Ö–≤–∞—Ç–∞–µ—Ç –ª–∏ CPU / RAM

–ø–æ–¥—Ö–æ–¥—è—Ç –ª–∏ labels

tolerations / taints

volume –¥–æ—Å—Ç—É–ø–µ–Ω?

PodAffinity / AntiAffinity

‚ùå –ù–µ –ø–æ–¥—Ö–æ–¥–∏—Ç ‚Üí –∏—Å–∫–ª—é—á–∞–µ—Ç—Å—è

2Ô∏è‚É£ Scoring (–û—Ü–µ–Ω–∫–∞)

–û—Å—Ç–∞–≤—à–∏–µ—Å—è –Ω–æ–¥—ã –æ—Ü–µ–Ω–∏–≤–∞—é—Ç—Å—è –ø–æ –±–∞–ª–ª–∞–º.

–ü—Ä–∏–º–µ—Ä –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤:

–º–µ–Ω—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∏ ‚Üí –≤—ã—à–µ –±–∞–ª–ª

–ª—É—á—à–µ locality

–±–∞–ª–∞–Ω—Å —Ä–µ—Å—É—Ä—Å–æ–≤

–ö–∞–∂–¥–æ–π Node ‚Üí score (0‚Äì100)

3Ô∏è‚É£ Binding (–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ)

–í—ã–±–∏—Ä–∞–µ—Ç—Å—è –ª—É—á—à–∞—è Node
–∏ Pod –ø—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç—Å—è:

spec:
  nodeName: node-2


Scheduler –ø–∏—à–µ—Ç —ç—Ç–æ –≤ API Server.

üß© –°—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã
New Pod
   ‚Üì
Scheduler
   ‚Üì
Filter Nodes
   ‚Üì
Score Nodes
   ‚Üì
Bind Pod ‚Üí Node

üìã –ß—Ç–æ —É—á–∏—Ç—ã–≤–∞–µ—Ç scheduler
üîπ –†–µ—Å—É—Ä—Å—ã
resources:
  requests:
    cpu: "500m"
    memory: "256Mi"


–ë–µ–∑ requests –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ö—É–∂–µ.

üîπ Labels & NodeSelector
nodeSelector:
  disktype: ssd


Pod –ø–æ–π–¥—ë—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ Node —Å ssd.

üîπ Affinity / AntiAffinity

–ë–æ–ª–µ–µ –≥–∏–±–∫–∏–π –≤–∞—Ä–∏–∞–Ω—Ç.

–ü—Ä–∏–º–µ—Ä:

–∑–∞–ø—É—Å–∫–∞—Ç—å —Ä—è–¥–æ–º ‚ùó

–∏–ª–∏ –Ω–∞–æ–±–æ—Ä–æ—Ç ‚Äî —Ä–∞–∑–Ω–µ—Å—Ç–∏

üîπ Taints & Tolerations

–ó–∞—â–∏—Ç–∞ –Ω–æ–¥.

Node:

NoSchedule


Pod –±–µ–∑ toleration ‚Üí –Ω–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è.

üîπ Volumes

Pod –Ω–µ –ø–æ–π–¥—ë—Ç —Ç—É–¥–∞, –≥–¥–µ –Ω–µ—Ç –Ω—É–∂–Ω–æ–≥–æ –¥–∏—Å–∫–∞.

üîß –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
‚úÖ Custom Scheduler

–ú–æ–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å —Å–≤–æ–π scheduler.

‚úÖ Multiple Schedulers

–ù–µ—Å–∫–æ–ª—å–∫–æ scheduler‚Äô–æ–≤ –≤ –æ–¥–Ω–æ–º –∫–ª–∞—Å—Ç–µ—Ä–µ.

‚úÖ Scheduling Profiles

–†–∞–∑–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è.

üö® –¢–∏–ø–æ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
‚ùå Pod –≤ Pending

–ü—Ä–∏—á–∏–Ω—ã:

–Ω–µ—Ç —Ä–µ—Å—É—Ä—Å–æ–≤

–Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç nodeSelector

taints

–Ω–µ—Ç volume

–ö–æ–º–∞–Ω–¥–∞:

kubectl describe pod <name>


–¢–∞–º –±—É–¥–µ—Ç –ø—Ä–∏—á–∏–Ω–∞.

üìå –ì–¥–µ —Ä–∞–±–æ—Ç–∞–µ—Ç scheduler

–ö–∞–∫ Pod –≤:

kube-system
kube-scheduler

üß† –ö–æ—Ä–æ—Ç–∫–æ

kube-scheduler ‚Äî —ç—Ç–æ ¬´–¥–∏—Å–ø–µ—Ç—á–µ—Ä¬ª, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–±–∏—Ä–∞–µ—Ç –ª—É—á—à–∏–π —Å–µ—Ä–≤–µ—Ä –¥–ª—è Pod.






